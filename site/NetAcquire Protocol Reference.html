<html>
<head>
<title>NetAcquire Protocol Reference</title>
<style type="text/css">
<!--
BODY {
	font-family: sans-serif;
}

H1, H2, H3 {
	margin-top: 40px;
	margin-bottom: -10px;
}

#Page_Title {
	margin-top: 0px;
}

A.interdocument{
	color: #6699ff;
}

SPAN.definition_for {
	font-weight: bold;
}

LI.format SPAN.definition, LI.example SPAN.definition, UL.variables SPAN.definition_for, SPAN.variable {
	font-family: monospace;
}

TABLE, TH, TD {
	border: 1px solid #000000;
}

OL {
	list-style-type: upper-roman;
}

OL OL {
	list-style-type: decimal;
}

OL OL OL {
	list-style-type: lower-alpha;
}

UL.document_history SPAN.date {
	font-weight: bold;
}

UL.document_history SPAN.contributor {
	font-style: italic;
}
-->
</style>
</head>

<body>
<h1 id="Page_Title">NetAcquire Protocol Reference</h1>
<p class="preamble">This document provides detailed specifications of the NetAcquire program's communication protocol. This information can be used to write alternate Acquire playing programs that are compatible with NetAcquire. This includes both end-user programs and bots that are written to automatically play the game.</p>


<h1 id="Table_of_Contents">Table of Contents</h1>
<ol>
	<li><a href="#About_This_Document" class="interdocument">About This Document</a></li>
	<li><a href="#Communication_Protocol" class="interdocument">Communication Protocol</a></li>
	<ol>
		<li><a href="#General_Format" class="interdocument">General Format</a></li>
		<li><a href="#Common_Parameters" class="interdocument">Common Parameters</a></li>
		<ol>
			<li><a href="#Chain-ID" class="interdocument">Chain-ID</a></li>
			<li><a href="#Client-State-ID" class="interdocument">Client-State-ID</a></li>
			<li><a href="#End-Game-Flag" class="interdocument">End-Game-Flag</a></li>
			<li><a href="#Game-Status-ID" class="interdocument">Game-Status-ID</a></li>
			<li><a href="#Message-Text" class="interdocument">Message-Text</a></li>
			<li><a href="#Rack-Tile" class="interdocument">Rack-Tile</a></li>
			<li><a href="#Tile-ID" class="interdocument">Tile-ID</a></li>
			<li><a href="#Tile-State" class="interdocument">Tile-State</a></li>
			<li><a href="#Version-ID" class="interdocument">Version-ID</a></li>
		</ol>
		<li><a href="#Host-Processed_Directives" class="interdocument">Host-Processed Directives</a></li>
		<ol>
			<li><a href="#BM_-_Broadcast_Message" class="interdocument">BM - Broadcast Message</a></li>
			<li><a href="#CL_-_Close_Client" class="interdocument">CL - Close Client</a></li>
			<li><a href="#CS_-_Chain_Selected" class="interdocument">CS - Chain Selected</a></li>
			<li><a href="#GS_-_Game_State" class="interdocument">GS - Game State</a></li>
			<li><a href="#JG_-_Join_Game" class="interdocument">JG - Join Game</a></li>
			<li><a href="#LG_-_List_Games" class="interdocument">LG - List Games</a></li>
			<li><a href="#LU_-_List_Users" class="interdocument">LU - List Users</a></li>
			<li><a href="#LV_-_Leave_Game" class="interdocument">LV - Leave Game</a></li>
			<li><a href="#MD_-_Merger_Disposition" class="interdocument">MD - Merger Disposition</a></li>
			<li><a href="#P_-_Purchase" class="interdocument">P - Purchase</a></li>
			<li><a href="#PG_-_Start_Game_Play" class="interdocument">PG - Start Game Play</a></li>
			<li><a href="#PI_-_Ping_(host)" class="interdocument">PI - Ping (host)</a></li>
			<li><a href="#PL_-_Add_Player" class="interdocument">PL - Add Player</a></li>
			<li><a href="#PR_-_Ping_Response_(host)" class="interdocument">PR - Ping Response (host)</a></li>
			<li><a href="#PT_-_Play_Tile" class="interdocument">PT - Play Tile</a></li>
			<li><a href="#SG_-_Start_Game" class="interdocument">SG - Start Game</a></li>
		</ol>
		<li><a href="#Client-Processed_Directives" class="interdocument">Client-Processed Directives</a></li>
		<ol>
			<li><a href="#AT_-_Activate_Tile" class="interdocument">AT - Activate Tile</a></li>
			<li><a href="#GC_-_Get_Chain" class="interdocument">GC - Get Chain</a></li>
			<li><a href="#GD_-_Get_Disposition" class="interdocument">GD - Get Disposition</a></li>
			<li><a href="#GM_-_Game_Message" class="interdocument">GM - Game Message</a></li>
			<li><a href="#GP_-_Get_Purchase" class="interdocument">GP - Get Purchase</a></li>
			<li><a href="#GT_-_Get_Tile" class="interdocument">GT - Get Tile</a></li>
			<li><a href="#LM_-_Lobby_Message" class="interdocument">LM - Lobby Message</a></li>
			<li><a href="#M_-_Client_Message" class="interdocument">M - Client Message</a></li>
			<li><a href="#PI_-_Ping_(client)" class="interdocument">PI - Ping (client)</a></li>
			<li><a href="#PR_-_Ping_Response_(client)" class="interdocument">PR - Ping Response (client)</a></li>
			<li><a href="#SB_-_Set_Board_Status" class="interdocument">SB - Set Board Status</a></li>
			<li><a href="#SP_-_Start_Player" class="interdocument">SP - Start Player</a></li>
			<li><a href="#SS_-_Set_State" class="interdocument">SS - Set State</a></li>
			<li><a href="#SV_-_Set_Value" class="interdocument">SV - Set Value</a></li>
		</ol>
	</ol>
	<li><a href="#Document_History" class="interdocument">Document History</a></li>
	<li><a href="#Suggestions_for_Improvement" class="interdocument">Suggestions for Improvement</a></li>
</ol>


<h1><a name="#About_This_Document" class="nolink">About This Document</a></h1>
<p>This document was originally compiled by Kensit (lornic at telus dot net). Any inquiries about the protocol structure or general contents of this document should go to him. In the process of making a compatible client, this document was updated, prettied and fleshed out by Nolan Waite (nolan at nwaite dot com). Any inquiries about the look of the document&#151;typos, formatting issues and so on&#151;should go to him.</p>


<h1><a name="#Communication_Protocol" class="nolink">Communication Protocol</a></h1>
<p>This section defines how NetAcquire communicates and provides information on writing alternate programs that may use that protocol.</p>
<p>All communication between NetAcquire clients and hosts is handled via strings of data containing sets of "Directives". A directive is a single activity for NetAcquire to process. All strings are ASCII-encoded. The last character of a string of data is always a colon.</p>
<p>Directives conform to a General Format and are broken into <a href="#Host-Processed_Directives" class="interdocument">Host-Processed Directives</a> and <a href="#Client-Processed_Directives" class="interdocument">Client-Processed Directives</a>. <a href="#Common_Parameters" class="interdocument">Common Parameters</a> define those parameters that have a single definition common to all uses.</p>
<p>Multiple directives can be sent within single blocks of data (e.g. <span class="variable">SS;4;:SB;99,0;:</span>). They will be separated by the string "<span class="variable">;:</span>". This format inevitably gives rise to unresolveable string parsing issues when <a href="#GM_-_Game_Message" class="interdocument">GM - Game Message</a> or <a href="#LM_-_Lobby_Message" class="interdocument">LM - Lobby Message</a> directives precede more directives, and have various combinations of quotation marks, semicolons and colons in them. A policy to refrain from sending out such directives in single blocks of data is advised.</p>

<h2><a name="General_Format" class="nolink">General Format</a></h2>
<p>All directives are formatted:</p>
<p class="format"><span class="variable">Directive-Code</span>;<span class="variable">Parameter-String</span>;:</p>
<p>Where:
<ul class="variable_definitions">
	<li><span class="definition_for">Directive-Code</span> <span class="definition">is a 1 or 2 character identifier of the type of directive.</span></li>
	<li><span class="definition_for">Parameter-String</span> <span class="definition">is a string of comma-separated values used by the directive. Special characters (commas, semicolons and colons) can only appear as data in a message parameter; they will only occur within double quotes.</span></li>
</ul>
</p>

<p>Each directive specification notes the directive's purpose, format and notes on its values or use.</p>


<h2><a name="Common_Parameters" class="nolink">Common Parameters</a></h2>
<h3><a name="Chain-ID" class="nolink">Chain-ID</a></h3>
<p class="description">Numeric code used to identify a hotel chain. The value used is the hexadecimal RGB specification of a hotel chain's color converted to decimal.</p>
<table>
	<caption>The numeric codes used as <span class="variable">Chain-ID</span></caption>
	<tr>
		<th>Chain</th>
		<th>Color, RGB hex value</th>
		<th>Numeric code</th>
	</tr>
	<tr>
		<td colspan="3" style="text-align: center; background-color: #ddd">Special IDs</td>
	</tr>
	<tr>
		<td>None (not in hotel)</td>
		<td>gray, C0C0C0</td>
		<td>0 or 12632256</td>
	</tr>
	<tr>
		<td>Discarded (unplayable rack tile)</td>
		<td>gray, 808080</td>
		<td>8421504</td>
	</tr>
	<tr>
		<td colspan="3" style="text-align: center; background-color: #ddd">Hotel IDs</td>
	</tr>
	<tr>
		<td>Luxor/Sackson</td>
		<td>red, 0000FF</td>
		<td>255</td>
	</tr>
	<tr>
		<td>Tower/Zeta</td>
		<td>yellow, 00FFFF</td>
		<td>65535</td>
	</tr>
	<tr>
		<td>American/America</td>
		<td>blue, FF0000</td>
		<td>16711680</td>
	</tr>
	<tr>
		<td>Festival/Fusion</td>
		<td>green, 00FF00</td>
		<td>65280</td>
	</tr>
	<tr>
		<td>Worldwide/Hydra</td>
		<td>brown, 004080</td>
		<td>16512</td>
	</tr>
	<tr>
		<td>Continental/Quantum</td>
		<td>cyan, FFFF00</td>
		<td>16776960</td>
	</tr>
	<tr>
		<td>Imperial/Phoenix</td>
		<td>pink, C0C0FF</td>
		<td>12632319</td>
	</tr>
</table>

<h3><a name="Client-State-ID" class="nolink">Client-State-ID</a></h3>
<p class="description">Numeric code used to announce to a client what state they are now entering.</p>
<table>
	<caption>The numeric codes used as <span class="variable">Client-State-ID</span></caption>
	<tr>
		<th>Numeric code</th>
		<th>State</th>
	</tr>
	<tr>
		<td>4</td>
		<td>Entering game</td>
	</tr>
</table>

<h3><a name="End-Game-Flag" class="nolink">End-Game-Flag</a></h3>
<p class="description">0 if game should not end; 1 if game should end. (See <a href="#P_-_Purchase" class="interdocument">P - Purchase</a> directive.)</p>
<p class="description">Unknown values. (See <a href="#GP_-_Get_Purchase" class="interdocument">GP - Get Purchase</a> directive.)</p>

<h3><a name="Game-Status-ID" class="nolink">Game-Status-ID</a></h3>
<p class="description">Numeric code used to identify the current state of a game.</p>
<table>
	<caption>The numeric codes used as <span class="variable">Game-Status-ID</span></caption>
	<tr>
		<th>Numeric code</th>
		<th>State</th>
	</tr>
	<tr>
		<td>0</td>
		<td>Awaiting Player Action</td>
	</tr>
	<tr>
		<td>1</td>
		<td>Awaiting Players (to join new game)</td>
	</tr>
	<tr>
		<td>2</td>
		<td>Next Turn</td>
	</tr>
	<tr>
		<td>3</td>
		<td>Play Tile</td>
	</tr>
	<tr>
		<td>4</td>
		<td>Form Chain</td>
	</tr>
	<tr>
		<td>5</td>
		<td>Choose Merger Survivor</td>
	</tr>
	<tr>
		<td>6</td>
		<td>Merger Bonuses</td>
	</tr>
	<tr>
		<td>7</td>
		<td>Choose Merge Chain</td>
	</tr>
	<tr>
		<td>8</td>
		<td>Get Merger Disposition</td>
	</tr>
	<tr>
		<td>9</td>
		<td>Merger Disposition</td>
	</tr>
	<tr>
		<td>10</td>
		<td>Merger End</td>
	</tr>
	<tr>
		<td>11</td>
		<td>Purchase</td>
	</tr>
	<tr>
		<td>12</td>
		<td>Draw Tile (for player)</td>
	</tr>
	<tr>
		<td>13</td>
		<td>Start Round</td>
	</tr>
	<tr>
		<td>99</td>
		<td>End Of Game</td>
	</tr>
</table>

<h3><a name="Message-Text" class="nolink">Message-Text</a></h3>
<p class="description">ASCII text string of a user-typed message, enclosed in double quotes. The official Netacquire client seems to occasionally escape quotation marks in a vain effort to resolve unresolvable string parsing issues when sending multiple directives, one of which includes a Message-Text variable. This behavior is undocumented.</p>

<h3><a name="Rack-Tile" class="nolink">Rack-Tile</a></h3>
<p class="description">Index number identifying the entry on a player's table of held tiles, from 1-6.</p>

<h3><a name="Tile-ID" class="nolink">Tile-ID</a></h3>
<p class="description">Integer value of a tile on the board. Tiles in column 1 (1A, 1B, etc.) are tiles 1-9; column 2, 10-18; column 3, 19-27; column 4, 28-36; column 5, 37-45; column 6, 46-54; column 7, 55-63; column 8, 64-72; column 9, 73-81; column 10, 82-90; column 11, 91-99; column 12, 100-108.</p>

<h3><a name="Tile-State" class="nolink">Tile-State</a></h3>
<p class="description">Integer value representing current state of the tile. Is 0 if tile is not in hotel, 12648384 if player can make a hotel with the tile, and otherwise takes on a <a href="#Chain-ID" class="interdocument">Chain-ID</a> to indicate the hotel it is part of.
</p>

<h3><a name="Version-ID" class="nolink">Version-ID</a></h3>
<p class="description">Series of three parameters related to the version number. For example, "version 2.0.3" becomes the three parameters "2", "0", "3".</p>


<h2><a name="Host-Processed_Directives" class="nolink">Host-Processed Directives</h2>
<p class="description">Directives sent from a client to a host, to be processed by the host.</p>

<h3><a name="BM_-_Broadcast_Message" class="nolink">BM - Broadcast Message</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">User-typed message to be sent to all relevant clients.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Message-Directive, Message-Text</span></li>
	<ul class="variables">
		<li><span class="definition_for">Message-Directive</span> <span class="definition">the directive code for the client-processed message directive to be used. Is either string literal "Game Room" or "Lobby".</span></li>
		<li><span class="definition_for">Message-Text</span> <span class="definition"><a href="#Message-Text" class="interdocument">see Message-Text</a>.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">BM;Lobby,"Send this message to everyone in the lobby!";:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">The host builds a new directive with <span class="variable">Message-Directive</span> and <span class="variable">Message-Text</span> and then sends it to all clients (all users in the game room if GM, all users connected to host if LM), including the client who originated the BM - Broadcast Message directive.</span></li>	
</ul>
</p>

<h3><a name="CL_-_Close_Client" class="nolink">CL - Close Client</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Requests host to drop the client connection.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Reason-Text</span></li>
	<ul class="variables">
		<li><span class="definition_for">Reason-Text</span> <span class="definition">Text string enclosed in double-quotes.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">No example.</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">Apparently, the official Netacquire client reacts in this way (currently unverified): only clients who are using a user-specified port number on their local machine use this directive. This is an attempt to allow the port to be reused by the client. By having the host close the port first, the client is then able to reuse the port right away (in theory). <span class="variable">Reason-Text</span> is displayed in the host log if non-blank (however, it currently is never set to a non-null value by clients).</span></li>
</ul>
</p>

<h3><a name="CS_-_Chain_Selected" class="nolink">CS - Chain Selected</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Tells the host the hotel chain the player has selected for a game action (form chain, selecting merger survivor, or selecting merge chain sequence).</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Chain-ID, Selection-Type</span></li>
	<ul class="variables">
		<li><span class="definition_for">Chain-ID</span> <span class="definition"><a href="#Chain-ID" class="interdocument">see Chain-ID</a>.</span></li>
		<li><span class="definition_for">Selection-Type</span> <span class="definition"><span class="variable"><a href="#Game-Status-ID" class="interdocument">Game-Status-ID</a></span> for the next game action to be performed due to the selection. This value is always the same as the one passed in the preceding <a href="#GC_-_Get_Chain" class="interdocument">GC - Get Chain</a> directive.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">CS;255,4;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">The host proceeds with the game by using the <span class="variable">Chain-ID</span> to process the game action indicated by <span class="variable">Selection-Type</span>.s</span></li>
</ul>
</p>

<h3><a name="GS_-_Game_State" class="nolink">GS - Game State</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Requests host to send the client status information about the game.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">No parameters.</span></li>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">GS;;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">The host sends a series of <a href="#GM_-_Game_Message" class="interdocument">GM - Game Message</a> directives with status information about the current game the user is in.</span></li>
</ul>
</p>

<h3><a name="JG_-_Join_Game" class="nolink">JG - Join Game</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Request by a client to join an existing game as a player or a spectator.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Game-Number, Player-Flag</span></li>
	<ul class="variables">
		<li><span class="definition_for">Game-Number</span> <span class="definition">an integer identifying the number of the game.</span></li>
		<li><span class="definition_for">Player-Flag</span> <span class="definition">0 if client wishes to observe, or -1 if client wishes to play.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">JG;1,-1;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">In the official Netacquire client, <span class="varible">Game-Number</span> is entered by the user and may not necessarily be a valid game number.</span></li>
</ul>
</p>

<h3><a name="LG_-_List_Games" class="nolink">LG - List Games</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Requests host to send the client information about the currently active games.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">No parameters.</span></li>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">LG;;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">The server sends the client a series of <a href="#LM_-_Lobby_Message" class="interdocument">LM - Lobby Message</a> directives for the set of currently active games.</span></li>
</ul>
</p>

<h3><a name="LU_-_List_Users" class="nolink">LU - List Users</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Requests host to send the client information about the currently active users.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">No parameters.</span></li>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">LU;;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">The server sends the client a series of <a href="#LM_-_Lobby_Message" class="interdocument">LM - Lobby Message</a> directives for the set of currently active users.</span></li>
</ul>
</p>

<h3><a name="LV_-_Leave_Game" class="nolink">LV - Leave Game</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Notifies host of intention to leave the current game the client is in.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">No parameters.</span></li>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">LV;;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">No notes.</span></li>
</ul>
</p>

<h3><a name="MD_-_Merger_Disposition" class="nolink">MD - Merger Disposition</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Notify server of client's decision what to do with shares after a merge.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Sell-Count, Trade-Count</span></li>
	<ul class="variables">
		<li><span class="definition_for">Sell-Count</span> <span class="definition">number of shares to be sold for cash.</span></li>
		<li><span class="definition_for">Trade-Count</span> <span class="definition">number of shares to be traded for the merger survivor's chain.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">MD;0,4;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">Expected response to a <a href="#GD_-_Get_Disposition" class="interdocument">GD - Get Disposition</a> directive.</span></li>
</ul>
</p>

<h3><a name="P_-_Purchase" class="nolink">P - Purchase</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Notify host how many shares of each hotel the client purchased.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Luxor-Purchased, Tower-Purchased, American-Purchased, Festival-Purchased, Worldwide-Purchased, Continental-Purchased, Imperial-Purchased, End-Game-Flag</span></li>
	<ul class="variables">
		<li><span class="definition_for">Luxor-Purchased</span> <span class="definition">number of Luxor/Sackson shares purchased.</span></li>
		<li><span class="definition_for">Tower-Purchased</span> <span class="definition">number of Tower/Zeta shares purchased.</span></li>
		<li><span class="definition_for">American-Purchased</span> <span class="definition">number of American/America shares purchased.</span></li>
		<li><span class="definition_for">Festival-Purchased</span> <span class="definition">number of Festival/Fusion shares purchased.</span></li>
		<li><span class="definition_for">Worldwide-Purchased</span> <span class="definition">number of Worldwide/Hydra shares purchased.</span></li>
		<li><span class="definition_for">Continental-Purchased</span> <span class="definition">number of Continental/Phoenix shares purchased.</span></li>
		<li><span class="definition_for">Imperial-Purchased</span> <span class="definition">number of Imperial/Quantum shares purchased.</span></li>
		<li><span class="definition_for">End-Game-Flag</span> <span class="definition">see <a href="#End-Game-Flag" class="interdocument">End-Game-Flag</a></span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">P;2,0,0,1,0,0,0,0;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">None of the variables are optional. The official Netacquire client does not check any variables to ensure they are reasonable.</span></li>
</ul>
</p>

<h3><a name="PG_-_Start_Game_Play" class="nolink">PG - Start Game Play</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Notify host of client's desire to start the game.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">No parameters.</span></li>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">PG;;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">No notes.</span></li>
</ul>
</p>

<h3><a name="PI_-_Ping_(host)" class="nolink">PI - Ping (host)</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">See if host is awake.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Start-Time</span></li>
	<ul class="variables">
		<li><span class="definition_for">Start-Time</span> <span class="definition">See example for time format.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">PI;6:08:41 PM;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">Sends immediate response of a <a href="#PR_-_Ping_Response_(client)" class="interdocument">PR - Ping Response</a> directive to client.</span></li>
</ul>
</p>

<h3><a name="PL_-_Add_Player" class="nolink">PL - Add Player</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Register client's nickname and version with host.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Nickname, Version-ID</span></li>
	<ul class="variables">
		<li><span class="definition_for">Nickname</span> <span class="definition">Client's desired nickname.</span></li>
		<li><span class="definition_for">Version-ID</span> <span class="definition">see <a href="#Version-ID" class="nolink">Version-ID</a>.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">PL;Champion,2,0,3;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">Sent by client immediately after receiving <a href="#SP_-_Start_Player" class="nolink">SP - Start Player</a> directive. The second part of a handshake between server and client.</span></li>
</ul>
</p>

<h3><a name="PR_-_Ping_Response_(host)" class="nolink">PR - Ping Response (host)</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Client's response to a host's <a href="#PI_-_Ping_(host)" class="interdocument">PI - Ping</a> directive.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Ping-Start-Time</span></li>
	<ul class="variables">
		<li><span class="definition_for">Ping-Start-Time</span> <span class="definition">See example for time format.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">PR;6:08:41 PM;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">Unsure if <span class="variable">Ping-Start-Time</span> should be the time the original ping started, or the time the response was sent. This directive seems to have no in-game effect; rather, it is for the information of curious users.</span></li>
</ul>
</p>

<h3><a name="PT_-_Play_Tile" class="nolink">PT - Play Tile</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Notify host of the tile the client wishes to play.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Played-Rack-Tile</span></li>
	<ul class="variables">
		<li><span class="definition_for">Played-Rack-Tile</span> <span class="definition">the <a href="#Rack-Tile" class="interdocument">Rack-Tile</a> for the tile the player wishes to place on the board.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">PT;3;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">The official Netacquire client does not check whether <span class="variable">Played-Rack-Tile</span> refers to a tile that can be legally played.</span></li>
</ul>
</p>

<h3><a name="SG_-_Start_Game" class="nolink">SG - Start Game</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Notify host of desire to create a new game.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Player-Limit</span></li>
	<ul class="variables">
		<li><span class="definition_for">Player-Limit</span> <span class="definition">Integer denoting number of players allowed in the game.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">SG;5;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition"><span class="variable">Player-Limit</span> should be a reasonable value, i.e. greater than one and less than some large integer.</span></li>
</ul>
</p>


<h2><a name="Client-Processed_Directives" class="nolink">Client-Processed Directives</a></h2>
<p class="description">Directives sent from a host to a client, to be processed by the client.</p>

<h3><a name="AT_-_Activate_Tile" class="nolink">AT - Activate Tile</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Set a rack tile's state.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Rack-Tile, Tile-ID, Rack-Color</span></li>
	<ul class="variables">
		<li><span class="definition_for">Rack-Tile</span> <span class="definition">see <a href="#Rack-Tile" class="interdocument">Rack-Tile</a>.</span></li>
		<li><span class="definition_for">Tile-ID</span> <span class="definition">see <a href="#Tile-ID" class="interdocument">Tile-ID</a>.</span></li>
		<li><span class="definition_for">Rack-Color</span> <span class="definition">see <a href="#Chain-ID" class="interdocument">Chain-ID</a>.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">AT;1,56,12632256;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">Receiving this directive for a tile the client doesn't have on his rack means he just drew said tile.</span></li>
</ul>
</p>

<h3><a name="GC_-_Get_Chain" class="nolink">GC - Get Chain</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Ask client to choose a hotel from a list.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Selection-Type, Hotel-Indexes</span></li>
	<ul class="variables">
		<li><span class="definition_for">Selection-Type</span> <span class="definition">Game-Status-ID for the game's <em>next</em> action (i.e. the one undertaken after this is processed). Limited to:
4 - Form Chain (creating a new hotel)
6 - Surviving Hotel (choosing the survivor among hotels tied in size)
8 - Get Disposition (after selecting merging chain).</span></li>
		<li><span class="definition_for">Hotel-Indexes</span> <span class="definition">a list of indexes indicating available hotels (1=Luxor, 2=Tower, ..., 7=Imperial)</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">GC;4,1,2,3,5,6,7;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">The host expects the immediate response of a <a href="#CS_-_Chain_Selected" class="interdocument">CS - Chain Selected</a> directive.</span></li>
</ul>
</p>

<h3><a name="GD_-_Get_Disposition" class="nolink">GD - Get Disposition</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Ask client what he wants to do with his shares in a disappearing hotel.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Merger-Flag, Chain-Name, Chain-Holding, Survivor-Shares-Available, Chain-ID, Survivor-Chain-ID</span></li>
	<ul class="variables">
		<li><span class="definition_for">Merger-Flag</span> <span class="definition">Purpose unknown. Observed value "True" when someone else merged. Observed value "False" when client merged.</span></li>
		<li><span class="definition_for">Chain-Name</span> <span class="definition">Name of hotel whose shares are being dealt with.</span></li>
		<li><span class="definition_for">Chain-Holding</span> <span class="definition">Number of shares client has in hotel.</span></li>
		<li><span class="definition_for">Survivor-Shares-Available</span> <span class="definition">Maximum number of shares that can be traded for.</span></li>
		<li><span class="definition_for">Chain-ID</span> <span class="definition"><span class="variable">Chain-ID</span> of hotel being dealt with (see <a href="#Chain-ID" class="interdocument">Chain-ID</a>).</span></li>
		<li><span class="definition_for">Survivor-Chain-ID</span> <span class="definition"><span class="variable">Chain-ID</span> of surviving hotel (see <a href="#Chain-ID" class="interdocument">Chain-ID<a/>).</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">GD;True,Tower,4,15,65535,16512;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">Appears to use string literals "True" and "False", not 0 and -1, for boolean values.</span></li>
</ul>
</p>

<h3><a name="GM_-_Game_Message" class="nolink">GM - Game Message</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Display a message in-game.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Message-Text</span></li>
	<ul class="variables">
		<li><span class="definition_for">Message-Text</span> <span class="definition">The message to be displayed, enclosed in double quotation marks.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">GM;"Show this message in the game's chat.";:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">The official Netacquire client has no qualms about sending these intermixed with other directives, leading to potential unresolveable parsing issues. How to handle this is anyone's guess&#151;one can only make the magic crash-triggering string so long.</span></li>
</ul>
</p>

<h3><a name="GP_-_Get_Purchase" class="nolink">GP - Get Purchase</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Ask client what he would like to purchase.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Game-Can-End-Flag, Cash-Available</span></li>
	<ul class="variables">
		<li><span class="definition_for">Game-Can-End-Flag</span> <span class="definition">see <a href="#End-Game-Flag" class="interdocument">End-Game-Flag</a>.</span></li>
		<li><span class="definition_for">Cash-Available</span> <span class="definition">The cash the client has on hand.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">GP;0,6000;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">Server expects eventual response of <a href="#P_-_Purchase" class="interdocument">P - Purchase</a> directive.</span></li>
</ul>
</p>

<h3><a name="GT_-_Get_Tile" class="nolink">GT - Get Tile</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Tell client to play a tile.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">No parameters.</span></li>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">GT;;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">Server expects eventual response of <a href="#PT_-_Play_Tile" class="interdocument">PT - Play Tile</a> directive.</span></li>
</ul>
</p>

<h3><a name="LM_-_Lobby_Message" class="nolink">LM - Lobby Message</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Display a message in the lobby.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Message-Text</span></li>
	<ul class="variables">
		<li><span class="definition_for">Message-Text</span> <span class="definition">The message to be displayed, enclosed in double quotation marks.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">LM;"Show this message in the lobby.";:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">The official Netacquire client has no qualms about sending these intermixed with other directives, leading to potential unresolveable parsing issues. How to handle this is anyone's guess&#151;one can only make the magic crash-triggering string so long.</span></li>
</ul>
</p>

<h3><a name="M_-_Client_Message" class="nolink">M - Client Message</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Display message box.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Client-Message-Text</span></li>
	<ul class="variables">
		<li><span class="definition_for">Client-Message-Text</span> <span class="definition">A parameter list-like string of message box options, apparently in the form <span class="variable">Dialog-Type, Dialog-Title, Dialog-Text</span>, enclosed in double quotes.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">M;"I;Game ended;The game has ended, click OK to view final game results.";:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">Some announcements, such as entering Test Mode or the game being over, are only given through this directive.</span></li>
</ul>
</p>

<h3><a name="PI_-_Ping_(client)" class="nolink">PI - Ping (client)</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Initialize a ping attempt.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Ping-Start-Time</span></li>
	<ul class="variables">
		<li><span class="definition_for">Ping-Start-Time</span> <span class="definition">See example for time format.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">PI;6:08:41 PM;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">Expects a <a href="#PR_-_Ping_Response" class="interdocument">PR - Ping Response</a> as immediate response from client.</span></li>
</ul>
</p>

<h3><a name="PR_-_Ping_Response_(client)" class="nolink">PR - Ping Response (client)</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Respond to host's <a href="#PI_-_Ping_(host)" class="interdocument">PI - Ping</a> directive.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Ping-Start-Time, Host-Nickname</span></li>
	<ul class="variables">
		<li><span class="definition_for">Ping-Start-Time</span> <span class="definition">See example for time format.</span></li>
		<li><span class="definition_for">Host-Nickname</span> <span class="definition">This parameter appears absent from actual directives in the official NetAcquire client.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">PR;6:08:41 PM;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">Unsure if <span class="variable">Ping-Start-Time</span> should be the time the original ping started, or the time the response was sent. This directive seems to have no in-game effect; rather, it is for the information of curious users.</span></li>
</ul>
</p>

<h3><a name="SB_-_Set_Board_Status" class="nolink">SB - Set Board Status</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Indicate that a tile's status has changed.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Tile-ID, Tile-State</span></li>
	<ul class="variables">
		<li><span class="definition_for">Tile-ID</span> <span class="definition">see <a href="#Tile-ID" class="interdocument">Tile-ID</a>.</span></li>
		<li><span class="definition_for">Tile-State</span> <span class="definition">see <a href="#Tile-State" class="interdocument">Tile-State</a>.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">SB;99,0;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">If this directive refers to a tile on a player's rack, assume that player has played the tile (i.e. take it off the rack).</span></li>
</ul>
</p>

<h3><a name="SP_-_Start_Player" class="nolink">SP - Start Player</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Notify client that connection is complete.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Version-ID, Host-Nickname</span></li>
	<ul class="variables">
		<li><span class="definition_for">Version-ID</span> <span class="definition">see <a href="#Version-ID" class="interdocument">Version-ID</a>.</span></li>
		<li><span class="definition_for">Host-Nickname</span> <span class="definition">The nickname of the host.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">SP;2,0,3,Champion;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">This completes the handshake with a Netacquire-compatible server; expect incoming <a href="#LM_-_Lobby_Message" class="interdocument">LM - Lobby Message</a> directives telling you about this server shortly.</span></li>
</ul>
</p>

<h3><a name="SS_-_Set_State" class="nolink">SS - Set State</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Set internal state of official NetAcquire client.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Client-State-ID</span></li>
	<ul class="variables">
		<li><span class="definition_for">Client-State-ID</span> <span class="definition">see <a href="#Client-State-ID" class="interdocument">Client-State-ID</a>.</span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">SS;3;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">No notes.</span></li>
</ul>
</p>

<h3><a name="SV_-_Set_Value" class="nolink">SV - Set Value</a></h3>
<p class="directive">
<ul class="variable_definitions">
	<li class="purpose"><span class="definition_for">Purpose</span> <span class="definition">Fiddle with the user interface.</span></li>
	<li class="format"><span class="definition_for">Format</span> <span class="definition">Form-Name, Control-Name, Control-Index, Property-ID, Property-Value</span></li>
	<ul class="variables">
		<li><span class="definition_for">Form-Name</span> <span class="definition">string identifying the internal form name that contains the control whose property is to be set. Refer to Game Set-Values Reference for the values used.</span></li>
		<li><span class="definition_for">Control-Name</span> <span class="definition"></span></li>
		<li><span class="definition_for">Control-Index</span> <span class="definition"></span></li>
		<li><span class="definition_for">Property-ID</span> <span class="definition">string identifying the name of the property to be set.</span></li>
		<li><span class="definition_for">Property-Value</span> <span class="definition"></span></li>
	</ul>
	<li class="example"><span class="definition_for">Example</span> <span class="definition">SV;frmTileRack,cmdTile,1,Visible,0;:</span></li>
	<li class="notes"><span class="definition_for">Notes</span> <span class="definition">The official Netacquire client sends certain information only through this directive: change in players' cash, for example. Moreover, <span class="variable">Control-Index</span> is particularly ill-defined.</span></li>
</ul>
</p>


<h1><a name="Document_History" class="nolink">Document History</a></h1>
<ul class="document_history">
	<li><span class="date">2008-Sep-29</span> <span class="contributor">(nwaite)</span> <span class="details">Enlarged <a href="#Table_of_Contents" class="interdocument">Table of Contents</a> and added some notes to a few directives.</span></li>
	<li><span class="date">2008-Jul-13</span> <span class="contributor">(nwaite)</span> <span class="details">Started adding deduced meanings of the <a href="#SS_-_Set_State" class="interdocument">SS</a> directive to the <a href="#Client-State-ID" class="interdocument">Client-State-ID</a> table.</span></li>
	<li><span class="date">2008-Apr-21</span> <span class="contributor">(nwaite)</span> <span class="details">Fleshed out various directives.</span></li>
	<li><span class="date">2008-Apr-20</span> <span class="contributor">(nwaite)</span> <span class="details">Started and finished cleanup. Added examples where known. Fleshed out <a href="#AT_-_Activate_Tile" class="interdocument">AT</a>, <a href="#JG_-_Join_Game" class="interdocument">JG</a>, <a href="#SB_-_Set_Board_Status" class="interdocument">SB</a> and <a href="#SS_-_Set_State" class="interdocument">SS</a> directives.</span></li>
	<li><span class="date">2008-Apr-10</span> <span class="contributor">(nwaite)</span> <span class="details">Retrieved original from <a href="http://www3.telus.net/kensit/NetAcquire/">http://www3.telus.net/kensit/NetAcquire/</a>.</span></li>
</ul>


<h1><a name="#Suggestions_for_Improvement" class="nolink">Suggestions for Improvement</a></h1>
<ul>
	<li>Ensure <a href="#GM_-_Game_Message" class="interdocument">GM - Game Message</a> and <a href="#LM_-_Lobby_Message" class="interdocument">LM - Lobby Message</a> directives are sent entirely independently, to avoid unresolveable string parsing problems.</li>
	<li>Add new directives for game events&#151;such as a player joining a game or a player's cash changing&#151;instead of using <a href="#SV_-_Set_Value" class="interdocument">SV - Set Value</a> directives.</li>
	<li>Create a new directive for game log messages (e.g. "Hey guys" sent as <a href="#GM_-_Game_Message" class="interdocument">GM - Game Message</a>, "> You drew tile 8C." sent as a new Game Log directive)</li>
</ul>

</body>
</html>